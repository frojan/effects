{"version":3,"sources":["webpack:///static/js/2.fc5165c79fbd1e26376f.js","webpack:///./src/pages/game/fallGame/main.ts","webpack:///./src/pages/game/fallGame/Food.ts"],"names":["webpackJsonp","22","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__Food__","App","this","foods","mouseX","score","numCatch","numMiss","renderer","PIXI","autoDetectRenderer","SCREEN_WIDTH","SCREEN_HEIGHT","antialias","transparent","resolution","document","querySelector","appendChild","view","stage","Container","creatFoods","initBasket","initPanel","enterFrame","prototype","food","i","NUM","push","addChild","basket","Graphics","beginFill","drawRect","endFill","x","y","height","pivot","width","interactive","on","onMove","bind","event","data","global","scorePanel","Text","fontFamily","fontSize","fill","scoreUpdate","text","requestAnimationFrame","Math","max","min","update","hitTestRectangle","init","render","c1","c2","combinedHalfWidths","combinedHalfHeights","vx","vy","abs","documentElement","clientWidth","clientHeight","27","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","Food","_super","_this","call","random","drawCircle","round"],"mappings":"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","file":"static/js/2.fc5165c79fbd1e26376f.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 22:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Food__ = __webpack_require__(27);\n\r\nvar App = (function () {\r\n    function App() {\r\n        this.foods = [];\r\n        this.mouseX = 0;\r\n        this.score = 0;\r\n        this.numCatch = 0;\r\n        this.numMiss = 0;\r\n        this.renderer = PIXI.autoDetectRenderer(App.SCREEN_WIDTH, App.SCREEN_HEIGHT, {\r\n            antialias: true,\r\n            transparent: false,\r\n            resolution: 1\r\n        });\r\n        var gameArea = document.querySelector('.game-area');\r\n        gameArea.appendChild(this.renderer.view);\r\n        this.stage = new PIXI.Container();\r\n        this.creatFoods();\r\n        this.initBasket();\r\n        this.initPanel();\r\n        this.enterFrame();\r\n    }\r\n    App.prototype.creatFoods = function () {\r\n        var food;\r\n        for (var i = 0; i < App.NUM; i++) {\r\n            food = new __WEBPACK_IMPORTED_MODULE_0__Food__[\"a\" /* default */]();\r\n            this.foods.push(food);\r\n            this.stage.addChild(food);\r\n        }\r\n    };\r\n    App.prototype.initBasket = function () {\r\n        this.basket = new PIXI.Graphics();\r\n        this.basket.beginFill(0xffffff);\r\n        this.basket.drawRect(0, 0, 50, 20);\r\n        this.basket.endFill();\r\n        this.basket.x = 0;\r\n        this.basket.y = App.SCREEN_HEIGHT - this.basket.height / 2;\r\n        this.basket.pivot.x = this.basket.width / 2;\r\n        this.basket.pivot.y = this.basket.height / 2;\r\n        this.stage.addChild(this.basket);\r\n        this.basket.interactive = true;\r\n        this.basket.on('pointermove', this.onMove.bind(this));\r\n    };\r\n    App.prototype.onMove = function (event) {\r\n        this.mouseX = event.data.global.x;\r\n    };\r\n    App.prototype.initPanel = function () {\r\n        this.scorePanel = new PIXI.Text(\"\\u5206\\u6570\\uFF1A\" + this.score, {\r\n            fontFamily: \"Arial\",\r\n            fontSize: 20,\r\n            fill: \"white\"\r\n        });\r\n        this.scorePanel.x = 0;\r\n        this.scorePanel.y = 0;\r\n        this.stage.addChild(this.scorePanel);\r\n    };\r\n    App.prototype.scoreUpdate = function () {\r\n        this.scorePanel.text = \"score: \" + this.score + \"\\ncatch: \" + this.numCatch + \"\\nmiss: \" + this.numMiss;\r\n    };\r\n    App.prototype.enterFrame = function () {\r\n        requestAnimationFrame(this.enterFrame.bind(this));\r\n        this.basket.x = Math.max(Math.min(this.mouseX, App.SCREEN_WIDTH - this.basket.width / 2), this.basket.width / 2);\r\n        for (var i = 0; i < App.NUM; i++) {\r\n            this.foods[i].update();\r\n            if (this.hitTestRectangle(this.foods[i], this.basket)) {\r\n                this.numCatch++;\r\n                this.score += this.foods[i].score;\r\n                this.foods[i].init();\r\n            }\r\n            else if (this.foods[i].y >= App.SCREEN_HEIGHT + this.foods[i].height / 2) {\r\n                this.numMiss++;\r\n                this.foods[i].init();\r\n            }\r\n        }\r\n        this.scoreUpdate();\r\n        this.renderer.render(this.stage);\r\n    };\r\n    App.prototype.hitTestRectangle = function (c1, c2) {\r\n        var hit, combinedHalfWidths, combinedHalfHeights, vx, vy;\r\n        hit = false;\r\n        vx = c1.x - c2.x;\r\n        vy = c1.y - c2.y;\r\n        combinedHalfWidths = c1.width * .5 + c2.width * .5;\r\n        combinedHalfHeights = c1.height * .5 + c2.height * .5;\r\n        if (Math.abs(vx) < combinedHalfWidths && Math.abs(vy) < combinedHalfHeights) {\r\n            hit = true;\r\n        }\r\n        else {\r\n            hit = false;\r\n        }\r\n        return hit;\r\n    };\r\n    App.NUM = 20;\r\n    App.SCREEN_WIDTH = document.documentElement.clientWidth;\r\n    App.SCREEN_HEIGHT = document.documentElement.clientHeight;\r\n    return App;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (App);\r\n\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar Food = (function (_super) {\r\n    __extends(Food, _super);\r\n    function Food() {\r\n        var _this = _super.call(this) || this;\r\n        _this.vy = Math.random() * 3 + 1;\r\n        _this.score = 0;\r\n        _this.init();\r\n        return _this;\r\n    }\r\n    Food.prototype.init = function () {\r\n        this.beginFill(0xffffff * Math.random());\r\n        this.drawCircle(0, 0, 10);\r\n        this.endFill();\r\n        this.x = Food.SCREEN_WIDTH * Math.random();\r\n        this.y = -Food.SCREEN_HEIGHT * Math.random();\r\n        this.score = Math.round(Math.random() * 10);\r\n    };\r\n    Food.prototype.update = function () {\r\n        this.y += this.vy;\r\n    };\r\n    Food.SCREEN_WIDTH = document.documentElement.clientWidth;\r\n    Food.SCREEN_HEIGHT = document.documentElement.clientHeight;\r\n    return Food;\r\n}(PIXI.Graphics));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (Food);\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.fc5165c79fbd1e26376f.js","import Food from './Food'\nclass App{\n    private static NUM = 20\n    private static SCREEN_WIDTH = document.documentElement.clientWidth\n    private static SCREEN_HEIGHT = document.documentElement.clientHeight\n\n    private renderer: PIXI.WebGLRenderer | PIXI.CanvasRenderer\n    private stage: PIXI.Container\n\n    private foods: Food[] = []\n    private basket: PIXI.Graphics\n    private mouseX: number = 0\n    private score: number = 0\n    private numCatch: number = 0\n    private numMiss: number = 0\n\n    private scorePanel: PIXI.Text\n\n    constructor () {\n        this.renderer = PIXI.autoDetectRenderer(App.SCREEN_WIDTH, App.SCREEN_HEIGHT, \n        {\n            antialias: true, \n            transparent: false, \n            resolution: 1\n        })\n        let gameArea: any = document.querySelector('.game-area')\n        gameArea.appendChild(this.renderer.view)\n        this.stage = new PIXI.Container()\n\n        this.creatFoods()\n        this.initBasket()\n        this.initPanel()\n        this.enterFrame()\n    }\n    creatFoods () {\n        let food\n        for(let i = 0; i<App.NUM; i++){\n            food = new Food()\n            this.foods.push(food)\n            this.stage.addChild(food)\n        }\n    }\n    initBasket () {\n        this.basket = new PIXI.Graphics()\n        this.basket.beginFill(0xffffff)\n        this.basket.drawRect(0, 0, 50, 20)\n        this.basket.endFill()\n        this.basket.x = 0\n        this.basket.y = App.SCREEN_HEIGHT - this.basket.height/2\n        this.basket.pivot.x = this.basket.width / 2\n        this.basket.pivot.y = this.basket.height / 2\n\n        this.stage.addChild(this.basket)\n\n        this.basket.interactive = true\n        this.basket.on('pointermove', this.onMove.bind(this))\n    }\n    onMove (event: any) {\n        this.mouseX = event.data.global.x\n    }\n    initPanel () {\n        this.scorePanel = new PIXI.Text(`分数：${this.score}`, {\n            fontFamily: \"Arial\",\n            fontSize: 20,\n            fill: \"white\"\n        })\n        this.scorePanel.x = 0\n        this.scorePanel.y = 0\n        this.stage.addChild(this.scorePanel)\n    }\n    scoreUpdate () {\n        this.scorePanel.text = `score: ${this.score}\\ncatch: ${this.numCatch}\\nmiss: ${this.numMiss}`\n    }\n    enterFrame () {\n        requestAnimationFrame(this.enterFrame.bind(this));\n\n        this.basket.x = Math.max(Math.min(this.mouseX, App.SCREEN_WIDTH-this.basket.width/2), this.basket.width/2)\n\n        for(let i = 0; i < App.NUM; i++ ){\n            this.foods[i].update()\n            if(this.hitTestRectangle(this.foods[i], this.basket)){\n                this.numCatch++\n                this.score += this.foods[i].score\n                this.foods[i].init()\n            }else if(this.foods[i].y >= App.SCREEN_HEIGHT+this.foods[i].height/2){\n                this.numMiss++\n                this.foods[i].init()\n            }\n        }\n        this.scoreUpdate()\n        this.renderer.render(this.stage)\n    }\n\n    hitTestRectangle (c1: PIXI.Container, c2: PIXI.Container) {\n        var hit, combinedHalfWidths, combinedHalfHeights, vx, vy\n        hit = false\n        vx = c1.x - c2.x\n        vy = c1.y - c2.y\n        combinedHalfWidths = c1.width*.5 + c2.width*.5;\n        combinedHalfHeights = c1.height*.5 + c2.height*.5;\n\n        if (Math.abs(vx) < combinedHalfWidths && Math.abs(vy) < combinedHalfHeights) {\n            hit = true;\n        } else {\n            hit = false;\n        }\n        return hit;\n    }\n}\n\nexport default App\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/fallGame/main.ts","class Food extends PIXI.Graphics{\n    private static SCREEN_WIDTH = document.documentElement.clientWidth\n    private static SCREEN_HEIGHT = document.documentElement.clientHeight\n\n    public vy: number = Math.random() * 3 + 1\n    public score: number = 0\n    constructor(){\n        super()   \n        this.init()\n    }\n    init () {\n        this.beginFill(0xffffff * Math.random())\n        this.drawCircle(0, 0, 10)\n        this.endFill()\n        this.x = Food.SCREEN_WIDTH * Math.random()\n        this.y = -Food.SCREEN_HEIGHT * Math.random()\n        this.score = Math.round(Math.random() * 10)\n    }\n    update(){\n        this.y += this.vy\n    }\n}\nexport default Food\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/fallGame/Food.ts"],"sourceRoot":""}