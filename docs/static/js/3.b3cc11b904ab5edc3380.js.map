{"version":3,"sources":["webpack:///static/js/3.b3cc11b904ab5edc3380.js","webpack:///./src/pages/game/fallGame/main.ts","webpack:///./src/pages/game/fallGame/Food.ts"],"names":["webpackJsonp","23","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_pixi_js__","__WEBPACK_IMPORTED_MODULE_1__Food__","n","App","this","foods","mouseX","score","numCatch","numMiss","renderer","SCREEN_WIDTH","SCREEN_HEIGHT","antialias","transparent","resolution","document","querySelector","appendChild","view","stage","creatFoods","initBasket","initPanel","enterFrame","prototype","food","i","NUM","push","addChild","basket","beginFill","drawRect","endFill","x","y","height","pivot","width","interactive","on","onMove","bind","event","data","global","scorePanel","fontFamily","fontSize","fill","scoreUpdate","text","requestAnimationFrame","Math","max","min","update","hitTestRectangle","init","render","c1","c2","combinedHalfWidths","combinedHalfHeights","vx","vy","abs","documentElement","clientWidth","clientHeight","28","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","Food","_super","_this","call","random","drawCircle","round","PIXI","Graphics"],"mappings":"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","file":"static/js/3.b3cc11b904ab5edc3380.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 23:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_pixi_js__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_pixi_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_pixi_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Food__ = __webpack_require__(28);\n\r\n\r\nvar App = (function () {\r\n    function App() {\r\n        this.foods = [];\r\n        this.mouseX = 0;\r\n        this.score = 0;\r\n        this.numCatch = 0;\r\n        this.numMiss = 0;\r\n        this.renderer = __WEBPACK_IMPORTED_MODULE_0_pixi_js__[\"autoDetectRenderer\"](App.SCREEN_WIDTH, App.SCREEN_HEIGHT, {\r\n            antialias: true,\r\n            transparent: false,\r\n            resolution: 1\r\n        });\r\n        var gameArea = document.querySelector('.game-area');\r\n        gameArea.appendChild(this.renderer.view);\r\n        this.stage = new __WEBPACK_IMPORTED_MODULE_0_pixi_js__[\"Container\"]();\r\n        this.creatFoods();\r\n        this.initBasket();\r\n        this.initPanel();\r\n        this.enterFrame();\r\n    }\r\n    App.prototype.creatFoods = function () {\r\n        var food;\r\n        for (var i = 0; i < App.NUM; i++) {\r\n            food = new __WEBPACK_IMPORTED_MODULE_1__Food__[\"a\" /* default */]();\r\n            this.foods.push(food);\r\n            this.stage.addChild(food);\r\n        }\r\n    };\r\n    App.prototype.initBasket = function () {\r\n        this.basket = new __WEBPACK_IMPORTED_MODULE_0_pixi_js__[\"Graphics\"]();\r\n        this.basket.beginFill(0xffffff);\r\n        this.basket.drawRect(0, 0, 50, 20);\r\n        this.basket.endFill();\r\n        this.basket.x = 0;\r\n        this.basket.y = App.SCREEN_HEIGHT - this.basket.height / 2;\r\n        this.basket.pivot.x = this.basket.width / 2;\r\n        this.basket.pivot.y = this.basket.height / 2;\r\n        this.stage.addChild(this.basket);\r\n        this.basket.interactive = true;\r\n        this.basket.on('pointermove', this.onMove.bind(this));\r\n    };\r\n    App.prototype.onMove = function (event) {\r\n        this.mouseX = event.data.global.x;\r\n    };\r\n    App.prototype.initPanel = function () {\r\n        this.scorePanel = new __WEBPACK_IMPORTED_MODULE_0_pixi_js__[\"Text\"](\"\\u5206\\u6570\\uFF1A\" + this.score, {\r\n            fontFamily: \"Arial\",\r\n            fontSize: 20,\r\n            fill: \"white\"\r\n        });\r\n        this.scorePanel.x = 0;\r\n        this.scorePanel.y = 0;\r\n        this.stage.addChild(this.scorePanel);\r\n    };\r\n    App.prototype.scoreUpdate = function () {\r\n        this.scorePanel.text = \"score: \" + this.score + \"\\ncatch: \" + this.numCatch + \"\\nmiss: \" + this.numMiss;\r\n    };\r\n    App.prototype.enterFrame = function () {\r\n        requestAnimationFrame(this.enterFrame.bind(this));\r\n        this.basket.x = Math.max(Math.min(this.mouseX, App.SCREEN_WIDTH - this.basket.width / 2), this.basket.width / 2);\r\n        for (var i = 0; i < App.NUM; i++) {\r\n            this.foods[i].update();\r\n            if (this.hitTestRectangle(this.foods[i], this.basket)) {\r\n                this.numCatch++;\r\n                this.score += this.foods[i].score;\r\n                this.foods[i].init();\r\n            }\r\n            else if (this.foods[i].y >= App.SCREEN_HEIGHT + this.foods[i].height / 2) {\r\n                this.numMiss++;\r\n                this.foods[i].init();\r\n            }\r\n        }\r\n        this.scoreUpdate();\r\n        this.renderer.render(this.stage);\r\n    };\r\n    App.prototype.hitTestRectangle = function (c1, c2) {\r\n        var hit, combinedHalfWidths, combinedHalfHeights, vx, vy;\r\n        hit = false;\r\n        vx = c1.x - c2.x;\r\n        vy = c1.y - c2.y;\r\n        combinedHalfWidths = c1.width * .5 + c2.width * .5;\r\n        combinedHalfHeights = c1.height * .5 + c2.height * .5;\r\n        if (Math.abs(vx) < combinedHalfWidths && Math.abs(vy) < combinedHalfHeights) {\r\n            hit = true;\r\n        }\r\n        else {\r\n            hit = false;\r\n        }\r\n        return hit;\r\n    };\r\n    App.NUM = 20;\r\n    App.SCREEN_WIDTH = document.documentElement.clientWidth;\r\n    App.SCREEN_HEIGHT = document.documentElement.clientHeight;\r\n    return App;\r\n}());\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (App);\r\n\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar Food = (function (_super) {\r\n    __extends(Food, _super);\r\n    function Food() {\r\n        var _this = _super.call(this) || this;\r\n        _this.vy = Math.random() * 3 + 1;\r\n        _this.score = 0;\r\n        _this.init();\r\n        return _this;\r\n    }\r\n    Food.prototype.init = function () {\r\n        this.beginFill(0xffffff * Math.random());\r\n        this.drawCircle(0, 0, 10);\r\n        this.endFill();\r\n        this.x = Food.SCREEN_WIDTH * Math.random();\r\n        this.y = -Food.SCREEN_HEIGHT * Math.random();\r\n        this.score = Math.round(Math.random() * 10);\r\n    };\r\n    Food.prototype.update = function () {\r\n        this.y += this.vy;\r\n    };\r\n    Food.SCREEN_WIDTH = document.documentElement.clientWidth;\r\n    Food.SCREEN_HEIGHT = document.documentElement.clientHeight;\r\n    return Food;\r\n}(PIXI.Graphics));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (Food);\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.b3cc11b904ab5edc3380.js","import * as PIXI from 'pixi.js'\nimport Food from './Food'\nclass App{\n    private static NUM = 20\n    private static SCREEN_WIDTH = document.documentElement.clientWidth\n    private static SCREEN_HEIGHT = document.documentElement.clientHeight\n\n    private renderer: PIXI.WebGLRenderer | PIXI.CanvasRenderer\n    private stage: PIXI.Container\n\n    private foods: Food[] = []\n    private basket: PIXI.Graphics\n    private mouseX: number = 0\n    private score: number = 0\n    private numCatch: number = 0\n    private numMiss: number = 0\n\n    private scorePanel: PIXI.Text\n\n    constructor () {\n        this.renderer = PIXI.autoDetectRenderer(App.SCREEN_WIDTH, App.SCREEN_HEIGHT, \n        {\n            antialias: true, \n            transparent: false, \n            resolution: 1\n        })\n        let gameArea: any = document.querySelector('.game-area')\n        gameArea.appendChild(this.renderer.view)\n        this.stage = new PIXI.Container()\n\n        this.creatFoods()\n        this.initBasket()\n        this.initPanel()\n        this.enterFrame()\n    }\n    creatFoods () {\n        let food\n        for(let i = 0; i<App.NUM; i++){\n            food = new Food()\n            this.foods.push(food)\n            this.stage.addChild(food)\n        }\n    }\n    initBasket () {\n        this.basket = new PIXI.Graphics()\n        this.basket.beginFill(0xffffff)\n        this.basket.drawRect(0, 0, 50, 20)\n        this.basket.endFill()\n        this.basket.x = 0\n        this.basket.y = App.SCREEN_HEIGHT - this.basket.height/2\n        this.basket.pivot.x = this.basket.width / 2\n        this.basket.pivot.y = this.basket.height / 2\n\n        this.stage.addChild(this.basket)\n\n        this.basket.interactive = true\n        this.basket.on('pointermove', this.onMove.bind(this))\n    }\n    onMove (event: any) {\n        this.mouseX = event.data.global.x\n    }\n    initPanel () {\n        this.scorePanel = new PIXI.Text(`分数：${this.score}`, {\n            fontFamily: \"Arial\",\n            fontSize: 20,\n            fill: \"white\"\n        })\n        this.scorePanel.x = 0\n        this.scorePanel.y = 0\n        this.stage.addChild(this.scorePanel)\n    }\n    scoreUpdate () {\n        this.scorePanel.text = `score: ${this.score}\\ncatch: ${this.numCatch}\\nmiss: ${this.numMiss}`\n    }\n    enterFrame () {\n        requestAnimationFrame(this.enterFrame.bind(this));\n\n        this.basket.x = Math.max(Math.min(this.mouseX, App.SCREEN_WIDTH-this.basket.width/2), this.basket.width/2)\n\n        for(let i = 0; i < App.NUM; i++ ){\n            this.foods[i].update()\n            if(this.hitTestRectangle(this.foods[i], this.basket)){\n                this.numCatch++\n                this.score += this.foods[i].score\n                this.foods[i].init()\n            }else if(this.foods[i].y >= App.SCREEN_HEIGHT+this.foods[i].height/2){\n                this.numMiss++\n                this.foods[i].init()\n            }\n        }\n        this.scoreUpdate()\n        this.renderer.render(this.stage)\n    }\n\n    hitTestRectangle (c1: PIXI.Container, c2: PIXI.Container) {\n        var hit, combinedHalfWidths, combinedHalfHeights, vx, vy\n        hit = false\n        vx = c1.x - c2.x\n        vy = c1.y - c2.y\n        combinedHalfWidths = c1.width*.5 + c2.width*.5;\n        combinedHalfHeights = c1.height*.5 + c2.height*.5;\n\n        if (Math.abs(vx) < combinedHalfWidths && Math.abs(vy) < combinedHalfHeights) {\n            hit = true;\n        } else {\n            hit = false;\n        }\n        return hit;\n    }\n}\n\nexport default App\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/fallGame/main.ts","class Food extends PIXI.Graphics{\n    private static SCREEN_WIDTH = document.documentElement.clientWidth\n    private static SCREEN_HEIGHT = document.documentElement.clientHeight\n\n    public vy: number = Math.random() * 3 + 1\n    public score: number = 0\n    constructor(){\n        super()   \n        this.init()\n    }\n    init () {\n        this.beginFill(0xffffff * Math.random())\n        this.drawCircle(0, 0, 10)\n        this.endFill()\n        this.x = Food.SCREEN_WIDTH * Math.random()\n        this.y = -Food.SCREEN_HEIGHT * Math.random()\n        this.score = Math.round(Math.random() * 10)\n    }\n    update(){\n        this.y += this.vy\n    }\n}\nexport default Food\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/fallGame/Food.ts"],"sourceRoot":""}