webpackJsonp([5],{24:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var h=e(37),s=function(){function t(){this.tubes=[],this.targetIndex=0,this.score=0,this.numDie=0,this.gravity=.2,this.flySpeedY=0,this.gameover=!1,this.renderer=PIXI.autoDetectRenderer(t.SCREEN_WIDTH,t.SCREEN_HEIGHT,{antialias:!0,transparent:!1,resolution:1,forceCanvas:!0}),this.renderer.view.style.width=t.SCREEN_WIDTH+"px",this.renderer.view.style.height=t.SCREEN_HEIGHT+"px",document.querySelector(".game-area").appendChild(this.renderer.view),this.stage=new PIXI.Container,this.initBg(),this.createTube(),this.initBird(),this.initPanel(),this.enterFrame()}return t.prototype.initBg=function(){this.bg=new PIXI.Graphics,this.bg.beginFill(0),this.bg.drawRect(0,0,t.SCREEN_WIDTH,t.SCREEN_HEIGHT),this.bg.endFill(),this.bg.x=0,this.bg.y=0,this.stage.addChild(this.bg)},t.prototype.createTube=function(){for(var i,e=t.SCREEN_WIDTH,s=0;s<t.NUM;s++)i=new h.a(e),this.stage.addChild(i),this.tubes.push(i),e+=150},t.prototype.initBird=function(){this.bird=new PIXI.Graphics,this.bird.beginFill(16777215),this.bird.drawRect(0,0,20,20),this.bird.endFill(),this.bird.x=.5*t.SCREEN_WIDTH,this.bird.y=.5*t.SCREEN_HEIGHT,this.bird.pivot.x=this.bird.width/2,this.bird.pivot.y=this.bird.height/2,this.stage.addChild(this.bird),this.stage.interactive=!0,this.stage.on("pointerdown",this.onDown.bind(this))},t.prototype.onDown=function(t){this.flySpeedY=-4,this.gameover=!1},t.prototype.initPanel=function(){this.scorePanel=new PIXI.Text("分数："+this.score,{fontFamily:"Arial",fontSize:20,fill:"white"}),this.scorePanel.x=0,this.scorePanel.y=0,this.stage.addChild(this.scorePanel)},t.prototype.scoreUpdate=function(){this.scorePanel.text="score: "+this.score+"\ndie: "+this.numDie},t.prototype.enterFrame=function(){if(requestAnimationFrame(this.enterFrame.bind(this)),this.flySpeedY+=this.gravity,this.bird.y+=this.flySpeedY,!this.gameover){for(var i=0;i<this.tubes.length;i++){if(this.hitTube(this.tubes[i],this.bird))return this.numDie++,void(this.gameover=!0);this.tubes[i].update(),this.tubes[i].x<-this.tubes[i].width&&this.tubes[i].init(this.tubes[0===i?this.tubes.length-1:i-1].x+150)}this.bird.y>=t.SCREEN_HEIGHT&&(this.numDie++,this.gameover=!0),this.bird.x-.5*this.bird.width>this.tubes[this.targetIndex].x+this.tubes[this.targetIndex].width&&(this.targetIndex=(this.targetIndex+1)%this.tubes.length,this.score++)}this.bird.y>=t.SCREEN_HEIGHT&&(this.bird.y=t.SCREEN_HEIGHT),this.scoreUpdate(),this.renderer.render(this.stage)},t.prototype.hitTube=function(t,i){var e=t.getChildAt(0),h=t.getChildAt(1),s=!1,n={x:t.x+.5*t.width,y:e.y+.5*e.height,width:t.width,height:e.height},r={x:t.x+.5*t.width,y:h.y+.5*h.height,width:t.width,height:h.height};return this.hitTestRectangle(n,i)?s=!0:this.hitTestRectangle(r,i)&&(s=!0),s},t.prototype.hitTestRectangle=function(t,i){var e,h,s,n;return!1,s=t.x-i.x,n=t.y-i.y,e=.5*t.width+.5*i.width,h=.5*t.height+.5*i.height,Math.abs(s)<e&&Math.abs(n)<h},t.NUM=5,t.SCREEN_WIDTH=document.documentElement.clientWidth,t.SCREEN_HEIGHT=document.documentElement.clientHeight,t}();i.default=s},37:function(t,i,e){"use strict";var h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};return function(i,e){function h(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(h.prototype=e.prototype,new h)}}(),s=function(t){function i(i){var e=t.call(this)||this;return e.vx=1,e.tubeUp=new PIXI.Graphics,e.tubeDown=new PIXI.Graphics,e.addChild(e.tubeUp),e.addChild(e.tubeDown),e.init(i),e}return h(i,t),i.prototype.init=function(t){var e=Math.floor(Math.random()*(i.SCREEN_HEIGHT-100-200)+100),h=16777215*Math.random();this.tubeUp.clear(),this.tubeUp.beginFill(h),this.tubeUp.drawRect(0,0,40,e),this.tubeUp.endFill(),this.tubeUp.x=0,this.tubeUp.y=0,this.tubeDown.clear(),this.tubeDown.beginFill(h),this.tubeDown.drawRect(0,0,40,i.SCREEN_HEIGHT-100-e),this.tubeDown.endFill(),this.tubeDown.x=0,this.tubeDown.y=i.SCREEN_HEIGHT-this.tubeDown.height,this.x=t},i.prototype.update=function(){this.x-=this.vx},i.SCREEN_WIDTH=document.documentElement.clientWidth,i.SCREEN_HEIGHT=document.documentElement.clientHeight,i}(PIXI.Container);i.a=s}});
//# sourceMappingURL=5.4ac79aa1c7b8ff32dd2d.js.map